# ğŸ—ï¸ Expo App Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    YOUR EXPO APP                            â”‚
â”‚                 (Community Transit)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                   â”‚                   â”‚
        â–¼                   â–¼                   â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  iOS â”‚          â”‚ Android  â”‚        â”‚   Web   â”‚
    â””â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   Apple Maps       Google Maps          Browser Map
        â”‚                   â”‚                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  React Native  â”‚
                    â”‚   Components   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“± Component Architecture

```
app/
â”œâ”€â”€ _layout.tsx                    â† Root Layout (Expo Router)
â”‚   â”œâ”€â”€ StatusBar
â”‚   â””â”€â”€ Stack Navigator
â”‚
â””â”€â”€ index.tsx                      â† Main Screen
    â”œâ”€â”€ MapView (react-native-maps)
    â”‚   â”œâ”€â”€ User Location Circle
    â”‚   â””â”€â”€ Bus Markers (15x)
    â”‚       â””â”€â”€ Passenger Badge
    â”‚
    â”œâ”€â”€ UI Components
    â”‚   â”œâ”€â”€ AdBanner
    â”‚   â”‚   â””â”€â”€ Close Button
    â”‚   â”‚
    â”‚   â”œâ”€â”€ BottomNav
    â”‚   â”‚   â”œâ”€â”€ Menu Button
    â”‚   â”‚   â”œâ”€â”€ Rewards Button
    â”‚   â”‚   â”œâ”€â”€ Main Action Button (Center)
    â”‚   â”‚   â”œâ”€â”€ Offers Button
    â”‚   â”‚   â””â”€â”€ Support Button
    â”‚   â”‚
    â”‚   â”œâ”€â”€ MapControls
    â”‚   â”‚   â”œâ”€â”€ Info Button
    â”‚   â”‚   â”œâ”€â”€ Search Button
    â”‚   â”‚   â”œâ”€â”€ Location Button
    â”‚   â”‚   â””â”€â”€ Navigation Button
    â”‚   â”‚
    â”‚   â”œâ”€â”€ Free Minutes Badge
    â”‚   â”‚
    â”‚   â””â”€â”€ Status Badge
    â”‚       â””â”€â”€ "X buses nearby"
    â”‚
    â””â”€â”€ Bus Info Popup (conditional)
        â”œâ”€â”€ Route Number
        â”œâ”€â”€ Passenger Count
        â”œâ”€â”€ Arrival Time
        â””â”€â”€ Track Button
```

## ğŸ”„ Data Flow

```
User Opens App
     â”‚
     â–¼
Request Location Permission
     â”‚
     â”œâ”€â”€â”€ âœ… Granted â”€â”€â”€â”€â”€â”€â–º Get GPS Coordinates
     â”‚                              â”‚
     â””â”€â”€â”€ âŒ Denied â”€â”€â”€â”€â”€â”€â–º Use Default (London)
                                    â”‚
                                    â–¼
                          Generate Mock Buses (15x)
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                               â”‚
                    â–¼                               â–¼
            Display on Map                  Update Every 5s
                    â”‚                               â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                               â”‚
             User Taps Bus                   User Interacts
                    â”‚                               â”‚
                    â–¼                               â–¼
            Show Bus Info                   Pan/Zoom Map
              Popup                         Center Location
                    â”‚                               â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                            "Track this bus"
                                 (Alert)
```

## ğŸ› ï¸ Technology Stack

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         User Interface Layer            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ TouchableOpacity (Buttons)          â”‚
â”‚  â€¢ View (Containers)                   â”‚
â”‚  â€¢ Text (Labels)                       â”‚
â”‚  â€¢ StyleSheet (Styling)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Component Layer                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ AdBanner.tsx                        â”‚
â”‚  â€¢ BottomNav.tsx                       â”‚
â”‚  â€¢ MapControls.tsx                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Map & Location Layer            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ react-native-maps                   â”‚
â”‚  â€¢ expo-location                       â”‚
â”‚  â€¢ Marker Components                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         State Management                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ useState (userLocation)             â”‚
â”‚  â€¢ useState (buses)                    â”‚
â”‚  â€¢ useState (selectedBus)              â”‚
â”‚  â€¢ useState (showAd)                   â”‚
â”‚  â€¢ useEffect (location & updates)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Core Libraries                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ React 18.3.1                        â”‚
â”‚  â€¢ React Native 0.76.5                 â”‚
â”‚  â€¢ Expo SDK ~52.0.0                    â”‚
â”‚  â€¢ TypeScript                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Native Platform APIs            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  iOS: CoreLocation, MapKit             â”‚
â”‚  Android: Google Play Services         â”‚
â”‚  Web: Geolocation API, Web Maps        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š State Management

```typescript
// Main State Variables

userLocation: {
  latitude: number,
  longitude: number
}
â”‚
â”œâ”€â–º Used for: Map centering
â”œâ”€â–º Updated by: GPS / Default
â””â”€â–º Triggers: Bus generation

buses: BusData[] (15 items)
â”‚
â”œâ”€â–º Contains: id, lat, lng, route, passengers, time
â”œâ”€â–º Updated: Every 5 seconds (simulated movement)
â””â”€â–º Displayed: As markers on map

selectedBus: BusData | null
â”‚
â”œâ”€â–º Tracks: Currently selected bus
â”œâ”€â–º Shows: Info popup
â””â”€â–º Toggles: On marker tap

showAd: boolean
â”‚
â”œâ”€â–º Controls: Ad banner visibility
â””â”€â–º Dismissible: Via close button

mapRef: RefObject<MapView>
â”‚
â”œâ”€â–º Controls: Map programmatically
â””â”€â–º Used for: Centering on user location
```

## ğŸŒ Platform-Specific Features

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     iOS      â”‚   Android    â”‚     Web      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Apple Maps   â”‚ Google Maps  â”‚ Web Maps     â”‚
â”‚ CoreLocation â”‚ GPS Services â”‚ Geolocation  â”‚
â”‚ Native Touch â”‚ Native Touch â”‚ Mouse/Touch  â”‚
â”‚ App Store    â”‚ Play Store   â”‚ Browser      â”‚
â”‚ Push (APNs)  â”‚ Push (FCM)   â”‚ Web Push     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ Build & Deploy Flow

```
Development
     â”‚
     â”œâ”€â–º npm start
     â”‚   â”œâ”€â–º Expo Go (Quick testing)
     â”‚   â””â”€â–º Metro Bundler
     â”‚
     â”œâ”€â–º npm run ios
     â”‚   â””â”€â–º iOS Simulator (Mac only)
     â”‚
     â””â”€â–º npm run android
         â””â”€â–º Android Emulator

Production
     â”‚
     â”œâ”€â–º npm run build:ios
     â”‚   â””â”€â–º Generates .ipa file
     â”‚       â””â”€â–º Submit to App Store
     â”‚
     â””â”€â–º npm run build:android
         â””â”€â–º Generates .aab/.apk file
             â””â”€â–º Submit to Play Store
```

This architecture gives you maximum flexibility and reach across all platforms! ğŸ¯
